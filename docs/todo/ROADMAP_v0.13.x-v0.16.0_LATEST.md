# Cb言語開発ロードマップ v0.13.1 - v0.16.0 改訂版（第2版）

**作成日**: 2025年11月14日  
**更新日**: 2025年11月14日（第2版）  
**対象期間**: 約15-19ヶ月
**ステータス**: ✅ 改訂完了（第2版）

---

## 📊 エグゼクティブサマリー

このドキュメントは、Cb言語の次期バージョン（v0.13.1〜v0.16.0）の実装計画をまとめた改訂版（第2版）です。

### 🔄 主な変更点（2025年11月14日 第2版）

**重要な方針転換**: 基本機能実装とコンパイラ実装を明確に分離

1. **v0.13.xで基本機能完結**: すべての基本機能をパッチバージョン（v0.13.1～v0.13.3）で実装
2. **v0.14.0からコンパイラ実装**: IR/バックエンド実装に専念
3. **バージョンの再編成**: 
   - 旧v0.14.0（Generic配列） → v0.13.2
   - 旧v0.15.0（IR/バックエンド） → v0.14.0
   - 旧v0.16.0（標準ライブラリ） → v0.15.0
   - 旧v0.17.0（パッケージ） → v0.16.0

### 🎯 各バージョンの目標

| バージョン | 種別 | 期間 | 主要目標 | フェーズ |
|-----------|------|------|---------|---------|
| **v0.13.1** | パッチ | 2-3ヶ月 | テストカバレッジ＋Asyncバグ修正 | **基本機能** |
| **v0.13.2** | パッチ | 1-2ヶ月 | Generic配列サポート | **基本機能** |
| **v0.13.3** | パッチ | 1-2ヶ月 | 追加機能・完成度向上 | **基本機能** |
| **v0.14.0** | マイナー | 3-4ヶ月 | IR基盤実装（HIR/MIR/LIR） | **コンパイラ** |
| **v0.15.0** | マイナー | 3-4ヶ月 | 複数バックエンド対応 | **コンパイラ** |
| **v0.16.0** | マイナー | 2-3ヶ月 | 標準ライブラリ完全化 | **完成** |

**総期間**: 15-19ヶ月

---

## 📅 全体タイムライン

```
                基本機能完成フェーズ        コンパイラ実装フェーズ    完成
                ┌─────────────┐          ┌─────────────┐        ┌───┐
Month 1-3:   v0.13.1 テストカバレッジ、Asyncバグ修正
Month 4-5:   v0.13.2 Generic配列サポート
Month 6-7:   v0.13.3 追加機能、完成度向上
             └─────────────┘
Month 8-11:              v0.14.0 IR基盤実装（HIR/MIR/LIR）
Month 12-15:             v0.15.0 複数バックエンド対応
                         └─────────────┘
Month 16-18:                            v0.16.0 標準ライブラリ完全化
                                        └───┘
```

---

## 🎯 Phase 1: 基本機能完成（v0.13.x）

### v0.13.1: テストカバレッジとAsyncバグ修正（2-3ヶ月）

**種別**: パッチバージョン  
**ステータス**: Planning

#### 主要な実装内容

1. **Integration Testカバレッジ改善** (67% → 100%)
   - 19個のAsync testケース追加
   - 期間: Week 1-2

2. **Async機能のバグ修正**
   - Async関数型サポート
   - Asyncラムダ式サポート
   - 構造体内asyncメソッド
   - Generic Interface impl構文
   - 期間: Week 3-6

3. **パターンマッチング強化**
   - ネストしたMatch式のサポート
   - 深いネストジェネリック型のテスト
   - 期間: Week 7

4. **ドキュメント整備**
   - BNF更新、言語仕様書更新、チュートリアル
   - 期間: Week 8

#### 成功指標（KPI）
- Integration testカバレッジ: **67% → 100%**
- 全テスト: **750+ → 850+**
- 後方互換性: **100%**

---

### v0.13.2: Generic配列サポート（1-2ヶ月）

**種別**: パッチバージョン  
**ステータス**: Future Planning

#### 主要な実装内容

1. **Generic配列サポート**
   - `T[N]` 形式のジェネリック配列
   - 配列ジェネリクスの完全サポート
   - 期間: Week 1-4

2. **ジェネリクス機能の成熟**
   - 深いネストジェネリック型のサポート
   - より複雑なジェネリクス構文
   - 期間: Week 5-6

3. **テスト追加**
   - Generic配列の包括的なテスト
   - エッジケースのカバレッジ
   - 期間: Week 7-8

#### 成功指標（KPI）
- Generic配列: **完全サポート**
- テスト追加: **50+個**
- 後方互換性: **100%**

---

### v0.13.3: 追加機能・完成度向上（1-2ヶ月）

**種別**: パッチバージョン  
**ステータス**: Future Planning

#### 主要な実装内容

1. **追加の言語機能**（必要に応じて）
2. **バグ修正**（v0.13.1, v0.13.2で発見された問題）
3. **パフォーマンス改善**（インタプリタ最適化）
4. **ドキュメント整備**（包括的なチュートリアル、APIリファレンス）

#### 成功指標（KPI）
- 基本機能: **100%実装完了**
- 安定性: **高**
- ドキュメント: **完全**

**重要**: v0.13.3完了時点で、基本機能実装フェーズは完結

---

## 🎯 Phase 2: コンパイラ実装（v0.14.0~）

### v0.14.0: IR基盤実装（3-4ヶ月）

**種別**: マイナーバージョン  
**ステータス**: Future Planning

**重要な転換点**: インタプリタ→コンパイラベースへ

#### 主要な実装内容

1. **IR基盤の構築**
   - HIR (High-level IR) - ASTから直接変換
   - MIR (Mid-level IR) - 型情報とコントロールフロー
   - LIR (Low-level IR) - マシンコードに近い表現
   - 期間: Week 1-12

2. **最適化パス**
   - 定数畳み込み
   - デッドコード削除
   - インライン展開
   - 期間: Week 13-14

3. **IRインタプリタ**
   - IRを直接実行できる仕組み
   - デバッグとテスト用
   - 期間: Week 15-16

#### 成功指標（KPI）
- IRの完全性: **すべてのCb構文をIRで表現可能**
- 最適化効果: **10-20%の性能向上**
- テスト合格: **既存の850+テストすべて合格**
- 後方互換性: **100%維持**

**詳細**: `v0.14.0/v0.14.0_implementation_plan.md`

---

### v0.15.0: 複数バックエンド対応（3-4ヶ月）

**種別**: マイナーバージョン  
**ステータス**: Future Planning

#### 主要な実装内容

1. **ネイティブコード生成**
   - x86-64 バックエンド
   - ARM64 バックエンド
   - 期間: Week 1-8

2. **WASM バックエンド**
   - WebAssembly コード生成
   - ブラウザ・Node.js対応
   - 期間: Week 9-12

3. **TypeScript バックエンド**
   - TypeScript コード生成
   - 型情報の保持
   - 期間: Week 13-16

#### 成功指標（KPI）
- バックエンド数: **3つ以上**
- パフォーマンス: **ネイティブ実行でインタプリタの10-100倍高速**
- テスト合格: **すべてのバックエンドで100%**

**詳細**: `v0.15.0/`（旧v0.16.0）

---

### v0.16.0: 標準ライブラリ完全化（2-3ヶ月）

**種別**: マイナーバージョン  
**ステータス**: Future Planning

#### 主要な実装内容

1. **組み込み関数ゼロ化**
   - すべての組み込み関数をライブラリ化
   - コンパイラとランタイムの分離
   - 期間: Week 1-6

2. **標準ライブラリ拡充**
   - 数学関数ライブラリ
   - 文字列処理ライブラリ
   - ファイルI/Oライブラリ
   - ネットワークライブラリ
   - 期間: Week 7-12

#### 成功指標（KPI）
- 組み込み関数: **ゼロ**
- 標準ライブラリ: **完全**
- テスト合格: **100%**

**詳細**: `v0.16.0/`（旧v0.17.0）

---

## 🎯 長期目標（v1.0.0）

### 目標

- ネイティブコンパイラ完成
- 実行ファイル生成
- インラインアセンブリ
- 完全な標準ライブラリ
- パッケージエコシステム

### 期間

v0.16.0完了後、約6-12ヶ月

---

## 📊 比較表：旧計画 vs 新計画（第2版）

| バージョン | 旧計画 | 新計画（第2版） | 変更理由 |
|-----------|-------|--------------|---------|
| v0.13.1 | テストカバレッジ | テストカバレッジ | 変更なし |
| v0.13.2 | - | Generic配列 | 新規追加（基本機能） |
| v0.13.3 | - | 追加機能・完成度向上 | 新規追加（基本機能） |
| v0.14.0 | Generic配列＋IR | IR基盤実装 | 基本機能をv0.13.2へ移動 |
| v0.15.0 | 複数バックエンド | 複数バックエンド | 旧v0.15.0→v0.14.0へ前倒し |
| v0.16.0 | 標準ライブラリ | 標準ライブラリ | 旧v0.16.0→v0.15.0へ前倒し |
| v0.17.0 | パッケージ | （削除） | v1.0.0へ延期 |

---

## 📝 重要な方針

### 基本機能 vs コンパイラ実装

**v0.13.x（パッチバージョン）**:
- インタプリタベースの基本機能実装
- テスト、バグ修正、ドキュメント
- すべての基本言語機能を完成させる

**v0.14.0~（マイナーバージョン）**:
- コンパイラ/IR/バックエンド実装
- パフォーマンス最適化
- 新しいインフラストラクチャ

### セマンティックバージョニング

```
v0.MINOR.PATCH
```

- **MINOR**: アーキテクチャ変更、新しいインフラ
- **PATCH**: 既存インフラ内での機能追加・バグ修正

---

## 📚 関連ドキュメント

- `VERSION_REORGANIZATION.md` - バージョン再編成の詳細記録
- `docs/todo/README.md` - TODOディレクトリ全体ガイド
- `v0.13.1/v0.13.1_implementation_plan.md` - v0.13.1詳細計画
- `v0.13.2/v0.13.2_implementation_plan.md` - v0.13.2詳細計画
- `v0.13.3/README.md` - v0.13.3概要
- `v0.14.0/v0.14.0_implementation_plan.md` - v0.14.0詳細計画

---

**Cb言語開発チーム**  
**最終更新**: 2025年11月14日（第2版）
