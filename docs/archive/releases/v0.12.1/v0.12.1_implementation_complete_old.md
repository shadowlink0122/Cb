# v0.12.1 å®Ÿè£…ã‚µãƒãƒªãƒ¼

**ãƒªãƒªãƒ¼ã‚¹æ—¥**: 2025å¹´11æœˆ11æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v0.12.1  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… Production Ready  
**ãƒ†ãƒ¼ãƒ**: Async/Await Improvements, Error Propagation and Timeout

---

## ğŸ¯ å®Ÿè£…ã•ã‚ŒãŸæ©Ÿèƒ½

### 1. ?ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆã‚¨ãƒ©ãƒ¼ä¼æ’­ï¼‰âœ…

**èª¬æ˜**: Rustã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚¨ãƒ©ãƒ¼ä¼æ’­æ¼”ç®—å­ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚

**ã‚µãƒãƒ¼ãƒˆå¯¾è±¡**:
- `Result<T, E>` - ã‚¨ãƒ©ãƒ¼ã‚’ä¼æ’­
- `Option<T>` - Noneã‚’ä¼æ’­
- asyncé–¢æ•°å†…ã§ã®ä½¿ç”¨

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- ãƒ‘ãƒ¼ã‚µãƒ¼: `src/frontend/recursive_parser/parsers/expression_parser.cpp`
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼: `src/backend/interpreter/evaluator/operators/error_propagation.cpp`
- AST: `src/common/ast.h` (AST_ERROR_PROPAGATION)

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**:
- `tests/cases/error_propagation/test_question_operator_result.cb`
- `tests/cases/error_propagation/test_question_operator_option.cb`
- `tests/cases/async/test_async_question_operator.cb`

**è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [docs/features/question_operator_design.md](question_operator_design.md)

---

### 2. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½ âœ…

**èª¬æ˜**: asyncé–¢æ•°ã«å¯¾ã—ã¦ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’è¨­å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

**ä½¿ç”¨æ–¹æ³•**:
```cb
use std::async::timeout;

Result<int, string> result = await timeout(slow_task(), 1000);
```

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- stdlib: `stdlib/async.cb` - `timeout()` é–¢æ•°
- builtin: `src/backend/interpreter/builtins/async_builtins.cpp` - `create_timer()`
- event loop: `src/backend/interpreter/event_loop/simple_event_loop.cpp`

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**:
- `tests/cases/error_propagation/test_timeout_basic.cb`

**è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [docs/features/timeout_design.md](timeout_design.md)

---

### 3. ç°¡æ½”ãªasyncæ§‹æ–‡ âœ…

**èª¬æ˜**: `async T`æ§‹æ–‡ã®ã‚µãƒãƒ¼ãƒˆï¼ˆ`async Future<T>`ã®çœç•¥å½¢ï¼‰

**å¤‰æ›´å‰**:
```cb
async Future<int> compute(int x) {
    return x * 2;
}
```

**å¤‰æ›´å¾Œ**:
```cb
async int compute(int x) {
    return x * 2;
}
```

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- ãƒ‘ãƒ¼ã‚µãƒ¼: `src/frontend/recursive_parser/parsers/declaration_parser.cpp`
- å‹ã‚·ã‚¹ãƒ†ãƒ : `src/backend/interpreter/managers/types/type_manager.cpp`

---

### 4. enumå‹ã®ç›´æ¥returnå¯¾å¿œ âœ…

**èª¬æ˜**: asyncé–¢æ•°å†…ã§enum variantã‚’ç›´æ¥returnã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

**å¤‰æ›´å‰ï¼ˆv0.12.0ï¼‰**:
```cb
async Option<int> find(int id) {
    Option<int> none = Option<int>::None;
    return none;  // å¤‰æ•°çµŒç”±ãŒå¿…è¦ã ã£ãŸ
}
```

**å¤‰æ›´å¾Œï¼ˆv0.12.1ï¼‰**:
```cb
async Option<int> find(int id) {
    return Option<int>::None;  // ç›´æ¥returnãŒå¯èƒ½
}
```

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- returnå‡¦ç†: `src/backend/interpreter/handlers/control/return.cpp`
- event loop: `src/backend/interpreter/event_loop/simple_event_loop.cpp`
- å¤‰æ•°å®£è¨€: `src/backend/interpreter/managers/variables/declaration.cpp`

---

## ğŸ“Š ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸

### ãƒ†ã‚¹ãƒˆæ•°
- **åˆè¨ˆ**: 740+ ãƒ†ã‚¹ãƒˆ
- **asyncé–¢é€£**: 32 ãƒ†ã‚¹ãƒˆ
- **error propagation**: 3 ãƒ†ã‚¹ãƒˆ
- **timeout**: 1 ãƒ†ã‚¹ãƒˆ
- **æˆåŠŸç‡**: 100% âœ…

### ãƒ†ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
```
tests/
â”œâ”€â”€ cases/
â”‚   â”œâ”€â”€ async/
â”‚   â”‚   â”œâ”€â”€ test_async_generic_interface_comprehensive.cb
â”‚   â”‚   â”œâ”€â”€ test_direct_return_enum.cb
â”‚   â”‚   â”œâ”€â”€ test_async_question_operator.cb
â”‚   â”‚   â””â”€â”€ ... (29å€‹)
â”‚   â”œâ”€â”€ error_propagation/
â”‚   â”‚   â”œâ”€â”€ test_question_operator_result.cb
â”‚   â”‚   â”œâ”€â”€ test_question_operator_option.cb
â”‚   â”‚   â””â”€â”€ test_timeout_basic.cb
â”‚   â”œâ”€â”€ generics/
â”‚   â””â”€â”€ ...
â””â”€â”€ integration/
    â””â”€â”€ integration-test (35+ tests)
```

---

## ğŸ”„ äº’æ›æ€§

### ç ´å£Šçš„å¤‰æ›´
- **ãªã—** - å®Œå…¨ãªå¾Œæ–¹äº’æ›æ€§ã‚’ç¶­æŒ

### éæ¨å¥¨æ©Ÿèƒ½
- `async Future<T>` æ§‹æ–‡ã¯éæ¨å¥¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€`async T`ãŒæ¨å¥¨ã•ã‚Œã¾ã™

---

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### æ›´æ–°ã•ã‚ŒãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
1. [release_notes/v0.12.1.md](../../release_notes/v0.12.1.md)
2. [docs/features/question_operator_design.md](question_operator_design.md)
3. [docs/features/timeout_design.md](timeout_design.md)
4. [docs/architecture.md](../architecture.md)
5. [docs/spec.md](../spec.md)
6. [README.md](../../README.md)

---

## ğŸ”œ æ¬¡ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ (v0.12.1ä»¥é™)

### é«˜åº¦ãªã‚¨ãƒ©ãƒ¼å‡¦ç†æ©Ÿèƒ½
1. **FromError trait**: ã‚¨ãƒ©ãƒ¼å‹ã®è‡ªå‹•å¤‰æ›
2. **Try trait**: ã‚«ã‚¹ã‚¿ãƒ å‹ã§ã®?ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼
3. **è¤‡é›‘ãªå¼**: `(a? + b?)` ã®ã‚ˆã†ãªæ¼”ç®—å­ã®çµ„ã¿åˆã‚ã›

### é«˜åº¦ãªã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
1. **race()**: è¤‡æ•°Futureã‹ã‚‰å…ˆã«å®Œäº†ã—ãŸã‚‚ã®ã‚’é¸æŠ
2. **select!ãƒã‚¯ãƒ­**: è¤‡æ•°ã®éåŒæœŸå‡¦ç†ã‚’å¾…ã¤
3. **with_timeoutå±æ€§**: é–¢æ•°ãƒ¬ãƒ™ãƒ«ã§ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š
4. **ã‚­ãƒ£ãƒ³ã‚»ãƒ«å‡¦ç†**: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚ã®ã‚¿ã‚¹ã‚¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«

è©³ç´°: [docs/features/v0.15.0_untested_behaviors.md](v0.15.0_untested_behaviors.md)

---

## âœ… å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [x] ?ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼å®Ÿè£…
- [x] ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½å®Ÿè£…
- [x] ç°¡æ½”ãªasyncæ§‹æ–‡å®Ÿè£…
- [x] enumç›´æ¥returnå¯¾å¿œ
- [x] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
- [x] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- [x] ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆä½œæˆ
- [x] å…¨ãƒ†ã‚¹ãƒˆåˆæ ¼

---

**v0.12.1å®Ÿè£…å®Œäº†ï¼** ğŸ‰
