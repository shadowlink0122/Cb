# v0.12.1 ?ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã¨ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½ã«ã¤ã„ã¦

**ä½œæˆæ—¥**: 2025å¹´11æœˆ11æ—¥  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: è¨­è¨ˆå®Œäº†ãƒ»ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆå®Œäº†ãƒ»å®Ÿè£…ã¯å°†æ¥å¯¾å¿œ

---

## ğŸ“‹ æ¦‚è¦

v0.12.1ã§ã¯ã€**?ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼**ã¨**ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½**ã®è¨­è¨ˆã¨ä»•æ§˜ç­–å®šã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚

ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã¯ã€è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ãŒã€**å®Ÿéš›ã®å®Ÿè£…ï¼ˆãƒ‘ãƒ¼ã‚µãƒ¼ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ï¼‰ã¯å°†æ¥ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§è¡Œã‚ã‚Œã¾ã™**ã€‚

---

## ğŸ¯ v0.12.1ã§ã®æˆæœ

### 1. ?ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼

**å®Œäº†ã—ãŸã‚‚ã®**:
- âœ… è¨­è¨ˆä»•æ§˜ã®ç­–å®šï¼ˆ[question_operator_design.md](question_operator_design.md)ï¼‰
- âœ… ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä½œæˆï¼ˆ3ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
  - `test_question_operator_result.cb`
  - `test_question_operator_option.cb`
  - `test_async_question_operator.cb`
- âœ… ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã¸ã®è¨˜è¼‰
- âœ… ASTå®šç¾©ã®ç¢ºèªï¼ˆ`AST_ERROR_PROPAGATION`ãŒæ—¢ã«å­˜åœ¨ï¼‰
- âœ… ãƒˆãƒ¼ã‚¯ãƒ³å®šç¾©ã®ç¢ºèªï¼ˆ`TOK_QUESTION`ãŒæ—¢ã«å­˜åœ¨ï¼‰

**æœªå®Œäº†ï¼ˆå°†æ¥å®Ÿè£…ï¼‰**:
- â³ ãƒ‘ãƒ¼ã‚µãƒ¼å®Ÿè£…ï¼ˆexpression_parser.cppã®æ‹¡å¼µï¼‰
- â³ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼å®Ÿè£…ï¼ˆerror_propagation.cppã®ä½œæˆï¼‰
- â³ å‹ãƒã‚§ãƒƒã‚¯å®Ÿè£…
- â³ ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå®Ÿè£…

---

### 2. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½

**å®Œäº†ã—ãŸã‚‚ã®**:
- âœ… è¨­è¨ˆä»•æ§˜ã®ç­–å®šï¼ˆ[timeout_design.md](timeout_design.md)ï¼‰
- âœ… ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä½œæˆï¼ˆ1ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
  - `test_timeout_basic.cb`ï¼ˆæœªä½œæˆã ãŒè¨­è¨ˆã«è¨˜è¼‰ï¼‰
- âœ… ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã¸ã®è¨˜è¼‰
- âœ… å®Ÿè£…æ–¹é‡ã®æ±ºå®šï¼ˆstdlib + builtiné–¢æ•°ï¼‰

**æœªå®Œäº†ï¼ˆå°†æ¥å®Ÿè£…ï¼‰**:
- â³ `create_timer()` builtiné–¢æ•°ã®å®Ÿè£…
- â³ `timeout()` stdlibé–¢æ•°ã®å®Ÿè£…
- â³ Event Loopæ‹¡å¼µï¼ˆã‚¿ã‚¤ãƒãƒ¼ç™»éŒ²æ©Ÿèƒ½ï¼‰
- â³ `race()` é–¢æ•°ã®å®Ÿè£…ï¼ˆv0.12.1ä»¥é™ï¼‰

---

## ğŸ“ å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### ?ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼å®Ÿè£…ï¼ˆå°†æ¥ï¼‰

**Phase 1: ãƒ‘ãƒ¼ã‚µãƒ¼æ‹¡å¼µ**
```cpp
// src/frontend/recursive_parser/parsers/expression_parser.cpp
ASTNode* ExpressionParser::parsePostfix() {
    ASTNode* expr = parsePrimary();
    
    while (true) {
        if (parser_->currentToken().type == TokenType::TOK_QUESTION) {
            parser_->advance();
            // AST_ERROR_PROPAGATIONãƒãƒ¼ãƒ‰ã‚’ä½œæˆ
            expr = createErrorPropagationNode(expr);
        }
        // ...
    }
}
```

**Phase 2: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼å®Ÿè£…**
```cpp
// src/backend/interpreter/evaluator/operators/error_propagation.cpp
Value evaluateErrorPropagation(ASTNode* node) {
    Value result = evaluate(node->expression);
    
    // Resultå‹ã®å ´åˆ
    if (result.is_result()) {
        if (result.is_err()) {
            // æ—©æœŸreturn
            return result;
        }
        return result.unwrap();
    }
    
    // Optionå‹ã®å ´åˆ
    if (result.is_option()) {
        if (result.is_none()) {
            return Value::none();
        }
        return result.unwrap();
    }
}
```

---

### ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½å®Ÿè£…ï¼ˆå°†æ¥ï¼‰

**Phase 1: builtiné–¢æ•°ã®è¿½åŠ **
```cpp
// src/backend/interpreter/builtins/async_builtins.cpp
Value builtin_create_timer(int timeout_ms) {
    auto future = std::make_shared<Future>();
    
    // ã‚¿ã‚¤ãƒãƒ¼ã‚’event loopã«ç™»éŒ²
    event_loop->register_timer(timeout_ms, [future]() {
        future->complete(Value::void_value());
    });
    
    return Value::future(future);
}
```

**Phase 2: stdlibé–¢æ•°ã®è¿½åŠ **
```cb
// stdlib/async.cb
namespace std {
namespace async {

async Result<T, string> timeout<T>(Future<T> future, int timeout_ms) {
    Future<void> timer = create_timer(timeout_ms);
    
    // ã©ã¡ã‚‰ã‹å…ˆã«å®Œäº†ã—ãŸæ–¹ã‚’ä½¿ã†ï¼ˆå°†æ¥ã®raceå®Ÿè£…ï¼‰
    int completed = await race(future, timer);
    
    if completed == 1 {
        return Result::Err("Timeout");
    }
    
    T value = await future;
    return Result::Ok(value);
}

}}
```

---

## ğŸ”„ å®Ÿè£…å„ªå…ˆåº¦

### å„ªå…ˆåº¦1ï¼ˆv0.12.1ã®æ¬¡ï¼‰
1. ?ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã®ãƒ‘ãƒ¼ã‚µãƒ¼å®Ÿè£…
2. ?ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼å®Ÿè£…
3. ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œã¨æ¤œè¨¼

### å„ªå…ˆåº¦2ï¼ˆv0.12.1å€™è£œï¼‰
1. `create_timer()` builtinå®Ÿè£…
2. `timeout()` stdlibå®Ÿè£…
3. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

### å„ªå…ˆåº¦3ï¼ˆv0.14.0å€™è£œï¼‰
1. `race()` é–¢æ•°ã®å®Ÿè£…
2. `select!` ãƒã‚¯ãƒ­ã®å®Ÿè£…
3. ã‚¨ãƒ©ãƒ¼å‹è‡ªå‹•å¤‰æ›ï¼ˆFromError traitï¼‰

---

## ğŸ“Š ç¾çŠ¶

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- âœ… è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œæˆ
- âœ… ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆè¨˜è¼‰
- âœ… ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ

### å®Ÿè£…
- â³ ãƒ‘ãƒ¼ã‚µãƒ¼ï¼ˆæœªå®Ÿè£…ï¼‰
- â³ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ï¼ˆæœªå®Ÿè£…ï¼‰
- â³ builtiné–¢æ•°ï¼ˆæœªå®Ÿè£…ï¼‰
- â³ stdlibï¼ˆæœªå®Ÿè£…ï¼‰

### ãƒ†ã‚¹ãƒˆ
- âœ… ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
- â³ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆå®Ÿè£…å¾Œï¼‰
- â³ Integration testè¿½åŠ ï¼ˆå®Ÿè£…å¾Œï¼‰

---

## ğŸ’¡ è£œè¶³

v0.12.1ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«ã¯ã€Œâœ… å®Ÿè£…å®Œäº†ã€ã¨è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¯**è¨­è¨ˆã¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆãŒå®Œäº†ã—ãŸ**ã¨ã„ã†æ„å‘³ã§ã™ã€‚

å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰å®Ÿè£…ã¯ã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¨ã—ã¦å–ã‚Šçµ„ã¾ã‚Œã¾ã™ã€‚

---

## ğŸ“š å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

1. [question_operator_design.md](question_operator_design.md) - ?ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼è¨­è¨ˆ
2. [timeout_design.md](timeout_design.md) - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½è¨­è¨ˆ
3. [v0.12.1.md](../../release_notes/v0.12.1.md) - ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ
4. [v0.15.0_untested_behaviors.md](v0.15.0_untested_behaviors.md) - æœªãƒ†ã‚¹ãƒˆæŒ™å‹•ä¸€è¦§

---

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: ?ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã¨ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½ã®å®Ÿè£…ã‚’é€²ã‚ã‚‹
