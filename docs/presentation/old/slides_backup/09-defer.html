<section class="left-align">
  <h2>defer文（Go風）</h2>

  <p class="small-text">Goのdefer文を採用。スコープ終了時に実行される処理を予約できます。</p>

  <div class="two-column" style="font-size: 0.85em">
    <div>
      <h3>defer なし</h3>
      <pre><code class="language-cb"><span class="hljs-type">void</span> processFile(<span class="hljs-type">string</span> path) {
    <span class="hljs-type">void*</span> file = open(path);
    
    <span class="hljs-keyword">if</span> (error1) {
        close(file);
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">if</span> (error2) {
        close(file);
        <span class="hljs-keyword">return</span>;
    }
    
    close(file);
}
</code></pre>
      <p class="tiny-text" style="color: #e74c3c">❌ close()の呼び出しが重複</p>
    </div>

    <div>
      <h3>defer あり</h3>
      <pre><code class="language-cb"><span class="hljs-type">void</span> processFile(<span class="hljs-type">string</span> path) {
    <span class="hljs-type">void*</span> file = open(path);
    <span class="hljs-keyword">defer</span> close(file);
    
    <span class="hljs-keyword">if</span> (error1) {
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">if</span> (error2) {
        <span class="hljs-keyword">return</span>;
    }
}
</code></pre>
      <p class="tiny-text" style="color: #27ae60">✅ スコープ終了時に自動実行</p>
    </div>
  </div>
</section>
