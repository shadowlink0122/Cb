<section class="left-align">
  <h2>カプセル化 - private/default修飾子</h2>
  <div style="width: 95%; margin: 0.5em auto 0">
    <div style="display: flex; gap: 1em">
      <div style="flex: 1">
        <h3 style="font-size: 0.75em; margin-bottom: 0.2em">構造体メンバのアクセス制御</h3>
        <pre
          style="font-size: 0.42em; margin: 0.3em 0"
        ><code class="language-cpp" data-trim data-noescape><span style="color: #c586c0; font-weight: bold;">struct</span> <span style="color: #4ec9b0;">BankAccount</span> {
    <span style="color: #c586c0; font-weight: bold;">private</span> <span style="color: #4ec9b0;">int</span> balance;     <span style="color: #6a9955;">// 外部からアクセス不可</span>
    <span style="color: #c586c0; font-weight: bold;">default</span> <span style="color: #4ec9b0;">string</span> owner;  <span style="color: #6a9955;">// デフォルトメンバ（最大1つ）</span>
};

<span style="color: #c586c0; font-weight: bold;">impl</span> <span style="color: #4ec9b0;">BankAccount</span> {
    self(<span style="color: #4ec9b0;">string</span> name, <span style="color: #4ec9b0;">int</span> initial) {
        self.<span style="color: #dcdcaa;">owner</span> = name;
        self.<span style="color: #dcdcaa;">balance</span> = initial;
    }
    
    <span style="color: #c586c0; font-weight: bold;">private</span> <span style="color: #4ec9b0;">void</span> validate() {
        <span style="color: #6a9955;">// プライベートメソッド</span>
    }
    
    <span style="color: #4ec9b0;">int</span> get_balance() {
        <span style="color: #c586c0; font-weight: bold;">return</span> self.<span style="color: #dcdcaa;">balance</span>;
    }
    
    <span style="color: #4ec9b0;">void</span> deposit(<span style="color: #4ec9b0;">int</span> amount) {
        <span style="color: #c586c0; font-weight: bold;">if</span> (amount > <span style="color: #b5cea8;">0</span>) {
            self.<span style="color: #dcdcaa;">balance</span> = self.<span style="color: #dcdcaa;">balance</span> + amount;
        }
    }
}</code></pre>
      </div>
      <div style="flex: 1">
        <h3 style="font-size: 0.75em; margin-bottom: 0.2em">defaultメンバの利点</h3>
        <pre
          style="font-size: 0.42em; margin: 0.3em 0"
        ><code class="language-cpp" data-trim data-noescape><span style="color: #4ec9b0;">void</span> main() {
    <span style="color: #4ec9b0;">BankAccount</span> acc(<span style="color: #ce9178;">"Alice"</span>, <span style="color: #b5cea8;">1000</span>);
    
    <span style="color: #6a9955;">// defaultメンバは直接アクセス可能</span>
    println(acc);  <span style="color: #6a9955;">// "Alice"と表示される</span>
    
    <span style="color: #6a9955;">// privateメンバは直接アクセス不可</span>
    <span style="color: #6a9955;">// acc.balance = 9999;  // エラー！</span>
    
    <span style="color: #6a9955;">// getter/setterを通してアクセス</span>
    println(acc.<span style="color: #dcdcaa;">get_balance</span>());  <span style="color: #6a9955;">// 1000</span>
    acc.<span style="color: #dcdcaa;">deposit</span>(<span style="color: #b5cea8;">500</span>);
    println(acc.<span style="color: #dcdcaa;">get_balance</span>());  <span style="color: #6a9955;">// 1500</span>
}</code></pre>
        <p style="font-size: 0.65em; margin-top: 0.5em; line-height: 1.4">
          <strong class="success">ポイント</strong>
          : defaultメンバは1つだけ指定可能で、
          <br />
          printlnなどで構造体を直接表示する際に使用されます
        </p>
      </div>
    </div>
  </div>
</section>
