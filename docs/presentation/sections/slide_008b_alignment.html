<section class="left-align">
  <h2>構造体とアライメント</h2>
  <div style="width: 95%; margin: 0.3em auto 0">
    <div style="display: flex; gap: 1em">
      <div style="flex: 1">
        <h3 style="font-size: 0.75em; color: #4ec9b0; margin-bottom: 0.3em">sizeof演算子</h3>
        <pre style="font-size: 0.45em; margin: 0.3em 0">
<code class="language-cpp" data-trim data-noescape><span style="color: #4ec9b0;">int</span> size1 = sizeof(<span style="color: #4ec9b0;">int</span>);      <span style="color: #6a9955;">// 4</span>
<span style="color: #4ec9b0;">int</span> size2 = sizeof(<span style="color: #4ec9b0;">double</span>);   <span style="color: #6a9955;">// 8</span>
<span style="color: #4ec9b0;">int</span> arr[<span style="color: #b5cea8;">10</span>];
<span style="color: #4ec9b0;">int</span> size3 = sizeof(arr);       <span style="color: #6a9955;">// 40 (4 * 10)</span></code></pre>
      </div>
      <div style="flex: 1">
        <h3 style="font-size: 0.75em; color: #4ec9b0; margin-bottom: 0.3em">メモリアライメント</h3>
        <pre style="font-size: 0.45em; margin: 0.3em 0">
<code class="language-cpp" data-trim data-noescape><span style="color: #c586c0;">struct</span> <span style="color: #4ec9b0;">Data</span> {
    <span style="color: #4ec9b0;">char</span> c;      <span style="color: #6a9955;">// 1 byte + 3 bytes padding</span>
    <span style="color: #4ec9b0;">int</span> i;       <span style="color: #6a9955;">// 4 bytes</span>
    <span style="color: #4ec9b0;">double</span> d;    <span style="color: #6a9955;">// 8 bytes</span>
}                <span style="color: #6a9955;">// 合計: 16 bytes</span>

<span style="color: #4ec9b0;">int</span> size = sizeof(<span style="color: #4ec9b0;">Data</span>);  <span style="color: #6a9955;">// 16</span></code></pre>
      </div>
    </div>
    <p class="fragment" style="font-size: 0.65em; margin-top: 0.5em">
      <strong class="warning">アライメント</strong>
      : 構造体のメンバーは効率的なメモリアクセスのため、最大メンバーのサイズの倍数にアライメントされます。
      <br />
      上記例では
      <code>double</code>
      (8 bytes)が最大なので、構造体全体が8の倍数（16 bytes）になります。
    </p>
  </div>
</section>
