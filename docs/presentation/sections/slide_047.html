<section class="left-align">
  <h2>プロジェクト構造とアーキテクチャ</h2>
  <div style="display: flex; gap: 0.8em; width: 88%; margin: 0.25em auto 0">
    <div style="flex: 1">
      <h3 style="font-size: 0.7em; margin-bottom: 0.2em">ディレクトリ構成</h3>
      <pre style="font-size: 0.46em; margin: 0.3em 0"><code data-trim>
Cb/
├── src/                # インタプリタ本体（C++17、約74,000行）
│   ├── frontend/       # フロントエンド
│   │   ├── lexer.cpp   # 字句解析器
│   │   ├── parser.cpp  # 構文解析器
│   │   └── ast.cpp     # AST定義
│   ├── backend/        # バックエンド
│   │   ├── interpreter.cpp
│   │   ├── event_loop.cpp
│   │   └── memory_manager.cpp
│   ├── common/         # 共通
│   │   ├── type_system.cpp
│   │   ├── scope.cpp
│   │   └── builtins.cpp
│   └── platform/       # プラットフォーム固有
├── stdlib/             # 標準ライブラリ（Cbコード）
│   └── std/
│       ├── vector.cb   # Vector&lt;T&gt;
│       ├── queue.cb    # Queue&lt;T&gt;
│       └── map.cb      # Map&lt;K,V&gt;
├── tests/              # テストスイート（755ファイル）
├── docs/               # ドキュメント
└── sample/             # サンプルコード
      </code></pre>
    </div>
    <div style="flex: 1">
      <h3 style="font-size: 0.7em; margin-bottom: 0.2em">実行フロー</h3>
      <pre class="code-box" style="font-size: 0.44em; margin: 0.3em 0"><code data-trim>
1. ソースコード読み込み (.cb)
   ↓
2. Lexer（字句解析）: トークン列生成
   ↓
3. Parser（構文解析）: ASTを構築
   ↓
4. 型チェッカー: 静的型検証・型推論
   ↓
5. Interpreter: AST走査・評価
   ├─ 変数・関数のスコープ管理
   ├─ 式評価・文実行
   ├─ メモリ管理（malloc/free/new/delete）
   └─ interface/implディスパッチ
   ↓
6. Event Loop（async/await時のみ）
   ├─ Task Queue管理
   ├─ 協調的マルチタスク
   └─ 時間経過管理（sleep）
   ↓
7. 実行結果出力 / エラー表示
      </code></pre>
      <h3 style="font-size: 0.7em; margin-bottom: 0.2em; margin-top: 0.25em">主要コンポーネント</h3>
      <ul style="font-size: 0.6em; line-height: 1.25; margin: 0; padding-left: 1.2em">
        <li>
          <strong>型システム</strong>
          : 静的型チェック・推論
        </li>
        <li>
          <strong>スコープ管理</strong>
          : 変数・関数・ネスト対応
        </li>
        <li>
          <strong>メモリ管理</strong>
          : malloc/free/new/delete
        </li>
        <li>
          <strong>イベントループ</strong>
          : 非同期実行・Task管理
        </li>
      </ul>
    </div>
  </div>
</section>
