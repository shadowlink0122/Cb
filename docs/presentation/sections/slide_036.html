<section class="left-align">
  <h2>型安全な非同期処理 - async/await（v0.13.0）</h2>
  <div style="width: 95%; margin: 0.3em auto 0">
    <pre style="font-size: 0.42em; margin: 0.3em 0">
  <code class="language-cpp" data-trim data-noescape><span style="color: #6a9955;">// ✅ v0.13.0: async/await + Result&lt;T,E&gt;完全統合</span>
<span style="color: #c586c0; font-weight: bold;">async</span> <span style="color: #4ec9b0;">Result</span>&lt;<span style="color: #4ec9b0;">int</span>, <span style="color: #4ec9b0;">string</span>&gt; divide_async(<span style="color: #4ec9b0;">int</span> a, <span style="color: #4ec9b0;">int</span> b) {
    <span style="color: #c586c0; font-weight: bold;">await</span> sleep(<span style="color: #b5cea8;">100</span>);  <span style="color: #6a9955;">// 非同期待機</span>
    <span style="color: #c586c0; font-weight: bold;">if</span> (b == <span style="color: #b5cea8;">0</span>) {
        <span style="color: #c586c0; font-weight: bold;">return</span> <span style="color: #4ec9b0;">Result</span>&lt;<span style="color: #4ec9b0;">int</span>, <span style="color: #4ec9b0;">string</span>&gt;::<span style="color: #4ec9b0;">Err</span>(<span style="color: #ce9178;">"Division by zero"</span>);
    }
    <span style="color: #c586c0; font-weight: bold;">return</span> <span style="color: #4ec9b0;">Result</span>&lt;<span style="color: #4ec9b0;">int</span>, <span style="color: #4ec9b0;">string</span>&gt;::<span style="color: #4ec9b0;">Ok</span>(a / b);
}
<span style="color: #c586c0; font-weight: bold;">void</span> main() {
    <span style="color: #6a9955;">// 複数の非同期タスクを並行実行（暗黙的にFutureになる）</span>
    <span style="color: #4ec9b0;">Result</span>&lt;<span style="color: #4ec9b0;">int</span>, <span style="color: #4ec9b0;">string</span>&gt; r1 = <span style="color: #c586c0; font-weight: bold;">await</span> divide_async(<span style="color: #b5cea8;">10</span>, <span style="color: #b5cea8;">2</span>);
    <span style="color: #4ec9b0;">Result</span>&lt;<span style="color: #4ec9b0;">int</span>, <span style="color: #4ec9b0;">string</span>&gt; r2 = <span style="color: #c586c0; font-weight: bold;">await</span> divide_async(<span style="color: #b5cea8;">20</span>, <span style="color: #b5cea8;">0</span>);  <span style="color: #6a9955;">// エラーケース</span>
    <span style="color: #4ec9b0;">Result</span>&lt;<span style="color: #4ec9b0;">int</span>, <span style="color: #4ec9b0;">string</span>&gt; r3 = <span style="color: #c586c0; font-weight: bold;">await</span> divide_async(<span style="color: #b5cea8;">30</span>, <span style="color: #b5cea8;">5</span>);
    <span style="color: #6a9955;">// awaitでenum情報を完全保持 → パターンマッチング可能</span>
    <span style="color: #c586c0; font-weight: bold;">match</span> (r1) {
        <span style="color: #4ec9b0;">Ok</span>(value) => println(<span style="color: #ce9178;">"Task1 Success: {value}"</span>),  <span style="color: #6a9955;">// 5</span>
        <span style="color: #4ec9b0;">Err</span>(msg) => println(<span style="color: #ce9178;">"Task1 Error: {msg}"</span>)
    }
    <span style="color: #c586c0; font-weight: bold;">match</span> (r2) {
        <span style="color: #4ec9b0;">Ok</span>(value) => println(<span style="color: #ce9178;">"Task2 Success: {value}"</span>),
        <span style="color: #4ec9b0;">Err</span>(msg) => println(<span style="color: #ce9178;">"Task2 Error: {msg}"</span>)        <span style="color: #6a9955;">// Division by zero</span>
    }
}</code></pre>
    <p class="fragment" style="font-size: 0.65em; margin-top: 0.3em">
      <strong class="highlight">v0.13.0の革新</strong>
      : async/awaitとResult型の完全統合により、型安全な非同期エラーハンドリングを実現
    </p>
  </div>
</section>
