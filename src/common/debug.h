#ifndef DEBUG_H
#define DEBUG_H

#include <string>

// デバッグ言語設定
enum class DebugLanguage { ENGLISH, JAPANESE };

// デバッグメッセージID
enum class DebugMsgId {
    // ノード作成関連
    NODE_CREATE_STMTLIST,
    NODE_CREATE_TYPESPEC,
    NODE_CREATE_VAR_DECL,
    NODE_CREATE_ASSIGN,
    NODE_CREATE_ARRAY_DECL,
    NODE_CREATE_FUNC_DECL,

    // 関数定義関連
    FUNC_DECL_REGISTER,
    FUNC_DECL_REGISTER_COMPLETE,
    PARAM_LIST_START,
    PARAM_LIST_SIZE,
    PARAM_LIST_COMPLETE,
    PARAM_LIST_DELETE,
    PARAM_LIST_NONE,
    FUNC_BODY_START,
    FUNC_BODY_EXISTS,
    FUNC_BODY_SET_COMPLETE,
    FUNC_BODY_NONE,
    FUNC_DEF_COMPLETE,

    // インタープリター関連
    INTERPRETER_START,
    AST_IS_NULL,
    GLOBAL_DECL_START,
    GLOBAL_DECL_COMPLETE,
    MAIN_FUNC_SEARCH,
    MAIN_FUNC_FOUND,
    MAIN_FUNC_EXECUTE,
    MAIN_FUNC_BODY_EXISTS,
    MAIN_FUNC_BODY_NULL,
    MAIN_FUNC_EXIT,

    // 式評価関連
    EXPR_EVAL_NUMBER,
    EXPR_EVAL_VAR_REF,
    VAR_VALUE,
    EXPR_EVAL_ARRAY_REF,
    ARRAY_INDEX,
    STRING_ELEMENT_ACCESS,
    STRING_LENGTH_UTF8,
    STRING_ELEMENT_VALUE,
    ARRAY_ELEMENT_ACCESS,
    ARRAY_ELEMENT_VALUE,
    EXPR_EVAL_BINARY_OP,
    BINARY_OP_VALUES,

    // メイン関数関連
    PARSING_START,
    AST_GENERATED,
    EXECUTION_COMPLETE,

    // 変数代入関連
    VAR_ASSIGN,
    VAR_CREATE_NEW,
    VAR_ASSIGN_READABLE,    // 人間が読みやすい形式
    STRING_ASSIGN_READABLE, // 文字列代入の読みやすい形式
    STRING_VAR_CREATE_NEW,  // 文字列変数作成
    VAR_DECLARATION_DEBUG,  // 変数宣言デバッグ

    // 配列初期化関連
    ARRAY_INIT_CALLED,
    ARRAY_INIT_WITH_TYPE_CALLED,
    ARRAY_LITERAL_CALLED,
    ARRAY_LITERAL_ASSIGN_DEBUG, // 配列リテラル代入デバッグ
    ARRAY_LITERAL_COMPLETED,
    ARRAY_INIT_COMPLETED,
    ARRAY_INIT_WITH_TYPE_COMPLETED,
    ARRAY_LITERAL_ELEMENTS,
    ARRAY_INIT_ELEMENTS,
    TYPE_MISMATCH_ARRAY_INIT,
    CURRENT_TYPE_SET,

    // エラーメッセージ
    PARSER_ERROR,
    TYPE_MISMATCH_ERROR,

    // 型システム関連
    TYPEDEF_REGISTER,
    TYPEDEF_REGISTER_SUCCESS,
    TYPE_ALIAS_RESOLVE,
    TYPE_ALIAS_CREATE_NODE,
    TYPE_ALIAS_RUNTIME_RESOLVE,

    // インタープリターエラー関連
    VAR_REDECLARE_ERROR,
    NEGATIVE_ARRAY_SIZE_ERROR,
    DYNAMIC_ARRAY_NOT_SUPPORTED,
    MAIN_FUNC_NOT_FOUND_ERROR,
    UNDEFINED_VAR_ERROR,
    DIRECT_ARRAY_REF_ERROR,
    UNDEFINED_ARRAY_ERROR,
    STRING_OUT_OF_BOUNDS_ERROR,
    ARRAY_OUT_OF_BOUNDS_ERROR,
    NON_ARRAY_REF_ERROR,
    ZERO_DIVISION_ERROR,
    UNKNOWN_BINARY_OP_ERROR,
    UNKNOWN_UNARY_OP_ERROR,
    UNDEFINED_FUNC_ERROR,
    ARG_COUNT_MISMATCH_ERROR,
    ARRAY_DECL_AS_EXPR_ERROR,
    UNSUPPORTED_EXPR_NODE_ERROR,

    // 構造体・多次元配列関連（新規追加）
    PARSE_STRUCT_DEF,
    PARSE_VAR_DECL,
    PARSE_EXPR_ARRAY_ACCESS,
    INTERPRETER_EXEC_STMT,
    INTERPRETER_VAR_DECL,
    VAR_MANAGER_PROCESS,
    VAR_MANAGER_STRUCT_CREATE,
    VAR_MANAGER_MULTIDIM_FLAG,
    EXPR_EVAL_STRUCT_MEMBER,
    EXPR_EVAL_MULTIDIM_ACCESS,

    // インタープリターエラー関連（続き）
    CONST_REASSIGN_ERROR,
    DIRECT_ARRAY_ASSIGN_ERROR,
    CONST_ARRAY_ASSIGN_ERROR,
    CONST_STRING_ELEMENT_ASSIGN_ERROR,
    TYPE_RANGE_ERROR,
    NON_STRING_CHAR_ASSIGN_ERROR,

    // デバッグ情報
    STRING_LITERAL_DEBUG,
    BINARY_OP_RESULT_DEBUG,
    UNARY_OP_DEBUG,
    UNARY_OP_OPERAND_DEBUG,
    UNARY_OP_RESULT_DEBUG,
    EXISTING_VAR_ASSIGN_DEBUG,
    EXISTING_STRING_VAR_ASSIGN_DEBUG,
    STRING_ELEMENT_ASSIGN_DEBUG,
    STRING_LENGTH_UTF8_DEBUG,
    STRING_ELEMENT_REPLACE_DEBUG,
    STRING_AFTER_REPLACE_DEBUG,
    ARRAY_DECL_EVAL_DEBUG,

    // 多次元配列関連
    ARRAY_DECL_DEBUG,
    ARRAY_DIMENSIONS_COUNT,
    MULTIDIM_ARRAY_PROCESSING,
    SINGLE_DIM_ARRAY_PROCESSING,
    MULTIDIM_ARRAY_ASSIGNMENT_DETECTED,
    MULTIDIM_ARRAY_ACCESS_INFO,
    FLAT_INDEX_CALCULATED,
    MULTIDIM_ARRAY_ASSIGNMENT_COMPLETED,
    ARRAY_ELEMENT_ASSIGN_DEBUG,
    VARIABLE_NOT_FOUND,
    ARRAY_INFO,
    ARRAY_INDEX_OUT_OF_BOUNDS,
    ARRAY_ELEMENT_ASSIGN_START,
    ARRAY_ELEMENT_ASSIGN_SUCCESS,

    // 配列宣言関連（追加）
    ARRAY_DECL_START,
    MULTIDIM_ARRAY_DECL_INFO,
    ARRAY_TOTAL_SIZE,
    MULTIDIM_ARRAY_DECL_SUCCESS,
    ARRAY_DECL_SUCCESS,
    ARRAY_DECL_COMPLETE_DEBUG,
    MULTIDIM_ARRAY_DECL_COMPLETE_DEBUG,

    // printf出力関連デバッグ
    PRINTF_OFFSET_CALLED,
    PRINTF_ARG_LIST_INFO,
    PRINTF_ARG_PROCESSING,
    PRINTF_ARRAY_REF_DEBUG,

    // 配列リテラル処理詳細メッセージ（新規追加）
    ARRAY_LITERAL_INIT_PROCESSING,
    ARRAY_ELEMENT_PROCESSING_DEBUG,
    ARRAY_ELEMENT_EVAL_START,
    ARRAY_ELEMENT_EVAL_VALUE,
    PRINT_MULTIPLE_PROCESSING,
    PRINT_SINGLE_ARG_DEBUG,
    PRINT_PRINTF_FORMAT_FOUND,
    PRINT_NO_ARGUMENTS_DEBUG,
    PRINT_EXECUTING_STATEMENT,
    PRINT_STATEMENT_HAS_ARGS,
    PRINT_CHECKING_ARGUMENT,
    PRINT_FOUND_STRING_LITERAL,
    PRINT_FORMAT_SPEC_CHECKING,
    PRINT_NO_FORMAT_SPECIFIERS,

    // 追加のメッセージID
    PARSE_CURRENT_TOKEN,
    PRINT_NO_ARGUMENTS,
    INTERPRETER_RETURN_ARRAY,

    // 新しいメッセージID
    PARSE_ENUM_DEF,
    INTERPRETER_RETURN_STMT,
    INTERPRETER_RETURN_VAR,
    INTERPRETER_RETURN_ARRAY_VAR,
    INTERPRETER_MULTIDIM_ARRAY_SIZE,
    INTERPRETER_REGULAR_ARRAY_SIZE,
    INTERPRETER_MULTIDIM_PROCESSING,
    INTERPRETER_MULTIDIM_ELEMENT,
    INTERPRETER_ARRAY_ELEMENT,
    INTERPRETER_RETURN_EXCEPTION,
    INTERPRETER_VAR_NOT_FOUND,
    PARSE_FUNCTION_CREATED,
    OUTPUT_FORMAT_SPEC_FOUND,
    OUTPUT_FORMAT_COUNT,

    // パーサー関連の新規メッセージID
    PARSE_USING_RECURSIVE_PARSER,
    PARSE_TYPE_CHECK,
    PARSE_REGISTER_GLOBAL_DECL,
    PARSE_STRUCT_REGISTER,
    PARSE_STRUCT_MEMBER_ARRAY,
    PARSE_STRUCT_MEMBER_REGULAR,
    PARSE_ENUM_REGISTER,
    PARSE_PROGRAM_START,
    PARSE_STATEMENT_START,
    PARSE_STATEMENT_SUCCESS,
    PARSE_PROGRAM_COMPLETE,
    PARSE_STATIC_MODIFIER,
    PARSE_CONST_MODIFIER,
    PARSE_TYPEDEF_START,
    PARSE_STRUCT_DECL_START,
    PARSE_ENUM_DECL_START,
    PARSE_TYPEDEF_OR_STRUCT_TYPE_FOUND,
    PARSE_IDENTIFIER_AFTER_TYPE,
    PARSE_FUNCTION_DETECTED,
    PARSE_ARRAY_DETECTED,
    PARSE_FUNCTION_DECL_FOUND,
    PARSE_STRUCT_VAR_DECL_FOUND,
    PARSE_STRUCT_ARRAY_DECL,
    PARSE_STRUCT_ARRAY_VAR_NAME,
    INTERPRETER_GLOBAL_VAR_INIT,
    INTERPRETER_EXCEPTION_IN_VAR_DECL,
    STRUCT_DEF_STORE,
    STRUCT_VAR_CREATE,
    STRUCT_MULTIDIM_ARRAY_CREATE,
    STRUCT_ARRAY_MEMBER_CREATE,
    STRUCT_REGULAR_MEMBER_CREATE,
    EXPRESSION_EVAL_ERROR,
    VARIABLE_ACCESS_ERROR,
    EXPR_EVAL_ARRAY_REF_START,
    EXPR_EVAL_CONDITION_FAILED,

    // 変数管理関連のメッセージID
    VAR_MANAGER_TYPE_RESOLVED,
    VAR_MANAGER_STRUCT_VAR_CREATE,
    VAR_MANAGER_MULTIDIM_MEMBER_CREATE,
    VAR_MANAGER_ARRAY_MEMBER_INIT,
    VAR_MANAGER_MEMBER_ADDED,

    // インタープリター構造体関連のメッセージID
    INTERPRETER_STRUCT_ARRAY_MEMBER_ADDED,
    INTERPRETER_ARRAY_DIMENSION_INFO,
    INTERPRETER_STRUCT_MEMBER_ADDED,
    INTERPRETER_STRUCT_REGISTERED,
    INTERPRETER_ENUM_REGISTERING,
    INTERPRETER_MULTIPLE_VAR_DECL_START,
    INTERPRETER_GLOBAL_VAR_INIT_START,
    INTERPRETER_ARRAY_LITERAL_INIT,
    INTERPRETER_NORMAL_VAR_INIT,
    INTERPRETER_GET_STRUCT_MEMBER,
    INTERPRETER_VAR_NOT_STRUCT,
    INTERPRETER_STRUCT_MEMBERS_FOUND,
    INTERPRETER_STRUCT_MEMBER_FOUND,
    INTERPRETER_NAMED_STRUCT_LITERAL_INIT,
    INTERPRETER_MEMBER_INIT_PROCESSING,
    INTERPRETER_NESTED_STRUCT_LITERAL,
    INTERPRETER_VAR_PROCESS_EXCEPTION,
    INTERPRETER_STRUCT_SYNCED,
    INTERPRETER_STRUCT_DEFINITION_STORED,
    INTERPRETER_SYNC_STRUCT_MEMBERS_START,
    INTERPRETER_SYNC_STRUCT_MEMBERS_END,
    INTERPRETER_PROCESSING_STMT_LIST,
    INTERPRETER_CHECKING_STATEMENT_TYPE,
    INTERPRETER_FOUND_VAR_DECL,

    // インタープリター実行関連のメッセージID
    INTERPRETER_STMT_DETAILS,
    INTERPRETER_STMT_LIST_EXEC,
    INTERPRETER_COMPOUND_STMT_EXEC,
    INTERPRETER_VAR_DECL_TYPE,
    INTERPRETER_VAR_DECL_SUCCESS,
    INTERPRETER_ASSIGNMENT,
    INTERPRETER_ASSIGNMENT_SUCCESS,
    INTERPRETER_MULTIPLE_VAR_DECL_EXEC,
    INTERPRETER_ARRAY_DECL_EXEC,
    INTERPRETER_IF_STMT_START,
    INTERPRETER_IF_CONDITION_RESULT,
    INTERPRETER_IF_THEN_EXEC,
    INTERPRETER_IF_ELSE_EXEC,
    INTERPRETER_IF_STMT_END,
    INTERPRETER_WHILE_STMT_START,
    INTERPRETER_WHILE_CONDITION_CHECK,
    INTERPRETER_WHILE_CONDITION_RESULT,
    INTERPRETER_WHILE_BODY_EXEC,
    INTERPRETER_WHILE_BREAK,
    INTERPRETER_WHILE_STMT_END,
    INTERPRETER_FOR_STMT_START,
    INTERPRETER_FOR_INIT_EXEC,
    INTERPRETER_FOR_CONDITION_CHECK,
    INTERPRETER_FOR_CONDITION_RESULT,
    INTERPRETER_FOR_BODY_EXEC,
    INTERPRETER_FOR_CONTINUE,
    INTERPRETER_FOR_UPDATE_EXEC,
    INTERPRETER_SWITCH_STMT_START,
    INTERPRETER_SWITCH_VALUE,
    INTERPRETER_SWITCH_CASE_MATCHED,
    INTERPRETER_SWITCH_ELSE_EXEC,
    INTERPRETER_SWITCH_STMT_END,
    INTERPRETER_SWITCH_RANGE_CHECK,
    INTERPRETER_SWITCH_VALUE_CHECK,

    // 式評価関連のメッセージID
    EXPR_EVAL_START,
    EXPR_EVAL_STRING_LITERAL,
    EXPR_EVAL_VAR_NOT_FOUND,
    EXPR_EVAL_VAR_VALUE,
    EXPR_EVAL_MULTIDIM_MEMBER_ARRAY_ACCESS,
    EXPR_EVAL_MEMBER_ACCESS_DETAILS,
    EXPR_EVAL_ARRAY_INDEX,

    // 多次元文字列配列アクセス関連
    MULTIDIM_STRING_ARRAY_ACCESS,
    MULTIDIM_STRING_ARRAY_INDICES,
    MULTIDIM_STRING_ARRAY_VALUE,

    // printf処理関連
    PRINTF_PROCESSING_ARRAY_REF,
    PRINTF_ARRAY_NAME_FOUND,
    PRINTF_VARIABLE_FOUND,
    PRINTF_STRING_MULTIDIM_PROCESSING,
    PRINTF_STRING_VALUE_RETRIEVED,

    // interface/impl関連
    INTERFACE_DECL_START,
    INTERFACE_DECL_COMPLETE,
    INTERFACE_METHOD_FOUND,
    IMPL_DECL_START,
    IMPL_DECL_COMPLETE,
    IMPL_METHOD_REGISTER,
    IMPL_METHOD_REGISTER_COMPLETE,
    METHOD_CALL_START,
    METHOD_CALL_RECEIVER_FOUND,
    METHOD_CALL_INTERFACE,
    METHOD_CALL_CHAIN,      // メソッドチェーン処理開始
    METHOD_CALL_CHAIN_TEMP, // 一時変数作成
    METHOD_CALL_SELF_CONTEXT_SET,
    METHOD_CALL_SELF_MEMBER_SETUP,
    METHOD_CALL_EXECUTE,
    SELF_MEMBER_ACCESS_START,
    SELF_MEMBER_ACCESS_FOUND,
    SELF_MEMBER_ACCESS_VALUE,

    // interface変数代入関連
    INTERFACE_VARIABLE_ASSIGN,

    // 三項演算子型推論関連
    TERNARY_EVAL_START,
    TERNARY_NODE_TYPE,
    TERNARY_TYPE_INFERENCE,
    TERNARY_STRING_MEMBER_ACCESS,
    TERNARY_NUMERIC_EVAL,
    TERNARY_STRING_EVAL,

    // 三項演算子変数初期化関連
    TERNARY_VAR_INIT_START,
    TERNARY_VAR_CONDITION,
    TERNARY_VAR_BRANCH_TYPE,
    TERNARY_VAR_STRING_SET,
    TERNARY_VAR_NUMERIC_SET,

    // インクリメント/デクリメント関連
    INCDEC_ARRAY_ELEMENT_START,
    INCDEC_ARRAY_NAME_FOUND,
    INCDEC_ARRAY_INDEX_EVAL,
    INCDEC_ELEMENT_TYPE_CHECK,
    INCDEC_INT_ARRAY_PROCESSING,
    INCDEC_FLOAT_ARRAY_PROCESSING,
    INCDEC_DOUBLE_ARRAY_PROCESSING,
    INCDEC_OLD_VALUE,
    INCDEC_NEW_VALUE,
    INCDEC_OPERATION_COMPLETE,
    INCDEC_UNSUPPORTED_TYPE_ERROR,

    // assert関連
    ASSERT_CHECK_START,
    ASSERT_CONDITION_TRUE,
    ASSERT_CONDITION_FALSE,
    ASSERT_FAILURE,

    // ネストした構造体メンバーアクセス関連
    NESTED_MEMBER_EVAL_START,           // ネストメンバー評価開始
    NESTED_MEMBER_BASE_PATH,            // ベースパス構築
    NESTED_MEMBER_BASE_VAR_FOUND,       // ベース変数発見
    NESTED_MEMBER_BASE_VAR_NOT_FOUND,   // ベース変数未発見
    NESTED_MEMBER_RESOLVE_FROM_BASE,    // ベースから解決開始
    NESTED_MEMBER_RESOLVE_SUCCESS,      // 解決成功
    NESTED_MEMBER_RESOLVE_FAILED,       // 解決失敗
    NESTED_MEMBER_INDIVIDUAL_VAR_FOUND, // 個別変数発見
    NESTED_MEMBER_FULL_PATH,            // 完全パス
    TYPED_EVAL_ENTRY,                   // typed expression評価エントリー
    TYPED_EVAL_INTERNAL_ENTRY, // typed expression internal評価エントリー
    TYPED_MEMBER_ACCESS_CASE,  // AST_MEMBER_ACCESSケース処理

    // v0.11.0: 組み込み型関連
    INTERPRETER_BUILTIN_TYPES_INIT_START,    // 組み込み型初期化開始
    INTERPRETER_BUILTIN_TYPES_INIT_COMPLETE, // 組み込み型初期化完了
    INTERPRETER_BUILTIN_ENUM_REGISTERED,     // 組み込みenum登録

    // メンバーアクセス再帰処理関連
    MEMBER_ACCESS_RECURSIVE_START, // 再帰的メンバーアクセス開始
    MEMBER_ACCESS_LEVEL,           // メンバーアクセスレベル
    MEMBER_ACCESS_SUCCESS,         // メンバーアクセス成功
    MEMBER_ACCESS_FAILED,          // メンバーアクセス失敗
    MEMBER_ACCESS_FINAL_TYPE,      // 最終結果の型

    // 変数宣言関連
    VAR_DECL_INIT_TYPE,       // 初期化式の型
    VAR_DECL_TYPED_VALUE,     // TypedValue評価完了
    VAR_DECL_STRUCT_MEMBERS,  // 構造体メンバー作成
    VAR_DECL_ASSIGN_STRING,   // 文字列変数代入
    VAR_DECL_POINTER_INIT,    // ポインタ初期化開始
    VAR_DECL_POINTER_VALUE,   // ポインタ値設定
    VAR_DECL_STRING_PTR_INIT, // 文字列ポインタ初期化

    // メンバー代入関連
    MEMBER_ASSIGN_STRUCT, // 構造体メンバー代入

    // v0.12.0: async/await関連 (Phase 1)
    ASYNC_FUNCTION_CALL,      // async関数呼び出し
    ASYNC_FUNCTION_RETURNED,  // async関数からの戻り値
    ASYNC_WRAPPING_FUTURE,    // Futureでラップ
    AWAIT_EXPRESSION_START,   // await式評価開始
    AWAIT_FUTURE_READY_CHECK, // Futureのis_readyチェック
    AWAIT_VALUE_EXTRACTED,    // Futureから値を抽出
    AWAIT_FUTURE_RECEIVED,    // awaitがFutureを受け取った
    AWAIT_RUN_UNTIL_COMPLETE, // run_until_complete呼び出し

    // v0.13.0: async/await Phase 2 - Event Loop & yield
    ASYNC_YIELD_CONTROL, // yieldで制御を渡す

    // 低レベルデバッグメッセージ (GENERIC_DEBUG置き換え用)
    // Method call / Self関連
    METHOD_SELF_SETUP_START,        // selfセットアップ開始
    METHOD_SELF_SETUP_COMPLETE,     // selfセットアップ完了
    METHOD_SELF_WRITEBACK_START,    // self書き戻し開始
    METHOD_SELF_WRITEBACK_COMPLETE, // self書き戻し完了
    METHOD_SELF_MERGE,              // selfマージ
    METHOD_POINTER_DEREF,           // ポインタデリファレンス
    METHOD_CONSTRUCTOR_SELF,        // コンストラクタself作成
    METHOD_CALL_DEBUG,              // メソッド呼び出しデバッグ
    METHOD_EXEC_DEBUG,              // メソッド実行デバッグ

    // Arrow operator関連
    ARROW_OP_MEMBER_ACCESS,     // アロー演算子メンバーアクセス
    ARROW_OP_NULL_CHECK,        // アロー演算子NULLチェック
    ARROW_OP_MEMORY_READ,       // アロー演算子メモリ読み込み
    ARROW_OP_TYPE_CAST,         // アロー演算子型キャスト
    ARROW_OP_GENERIC_RESOLVE,   // アロー演算子ジェネリック解決
    ARROW_ASSIGN_START,         // アロー代入開始
    ARROW_ASSIGN_COMPLETE,      // アロー代入完了
    ARROW_ASSIGN_MEMBER_UPDATE, // アロー代入メンバー更新
    ARROW_ASSIGN_METADATA,      // アロー代入メタデータ

    // Member access関連
    MEMBER_ACCESS_DEBUG,     // メンバーアクセスデバッグ
    MEMBER_ACCESS_REFERENCE, // メンバーアクセス参照解決
    MEMBER_ACCESS_FOUND,     // メンバー発見
    MEMBER_ASSIGN_START,     // メンバー代入開始
    MEMBER_ASSIGN_COMPLETE,  // メンバー代入完了
    MEMBER_ASSIGN_NESTED,    // ネストメンバー代入
    MEMBER_ARRAY_ACCESS,     // メンバー配列アクセス
    MEMBER_EVAL_RESULT,      // メンバー評価結果

    // Impl/Interface関連（既存のIMPL_METHOD_REGISTERなどを活用）
    IMPL_REGISTER_DEBUG,      // impl登録デバッグ
    IMPL_FIND_EXACT,          // impl検索（完全一致）
    IMPL_FIND_GENERIC,        // impl検索（ジェネリック）
    IMPL_GENERIC_INSTANTIATE, // ジェネリックimplインスタンス化
    IMPL_GENERIC_CACHE_HIT,   // ジェネリックimplキャッシュヒット
    IMPL_GENERIC_CACHE_MISS,  // ジェネリックimplキャッシュミス
    IMPL_GENERIC_TYPE_MAP,    // ジェネリックimpl型マップ
    IMPL_HANDLE_DEBUG,        // impl処理デバッグ
    IMPL_CONSTRUCTOR_DEBUG,   // implコンストラクタデバッグ

    // Statement executor関連
    STMT_EXEC_DEBUG,          // 文実行デバッグ
    STMT_MEMBER_ARRAY_ASSIGN, // メンバー配列代入
    STMT_NESTED_STRUCT_ARRAY, // ネスト構造体配列
    STMT_SELF_ASSIGN,         // self代入

    // Struct operations関連
    STRUCT_OP_GET_MEMBER,      // 構造体メンバー取得
    STRUCT_OP_SYNC_MEMBER,     // 構造体メンバー同期
    STRUCT_OP_MULTIDIM_ACCESS, // 構造体多次元配列アクセス
    STRUCT_OP_FLAT_INDEX,      // 構造体フラットインデックス

    // Return handler関連
    RETURN_EXPR_DEBUG,    // return式デバッグ
    RETURN_POINTER_DEBUG, // returnポインタデバッグ
    RETURN_TYPED_VALUE,   // return型付き値

    // Call implementation関連
    CALL_IMPL_DEBUG,    // 関数呼び出し実装デバッグ
    CALL_IMPL_BUILTIN,  // 組み込み関数呼び出し
    CALL_IMPL_MALLOC,   // malloc呼び出し
    CALL_IMPL_SLEEP,    // sleep呼び出し
    CALL_IMPL_RECEIVER, // レシーバー処理

    // Parser関連
    PARSER_TOKEN_DEBUG, // パーサートークンデバッグ

    // Expression service関連
    EXPR_SERVICE_ERROR, // 式サービスエラー

    // 詳細デバッグカテゴリ（頻出パターン用）
    DEBUG_GENERIC,        // DEBUG: プレフィックス
    ENUM_VAR_DECL_DEBUG,  // [ENUM_VAR_DECL_MANAGER]
    EVAL_RESOLVER_DEBUG,  // [EVAL_RESOLVER]
    STRUCT_LITERAL_DEBUG, // STRUCT_LITERAL_DEBUG:
    SYNC_STRUCT_DEBUG,    // SYNC_STRUCT:
    GENERIC_CTOR_DEBUG,   // [GENERIC_CTOR]
    UNION_TYPE_DEBUG,     // UNION_*_DEBUG:
    TYPEDEF_DEBUG,        // TYPEDEF_DEBUG:
    BUILTIN_TYPES_DEBUG,  // [BUILTIN_TYPES]
    ASSIGN_IFACE_DEBUG,   // ASSIGN_IFACE:
    REGISTER_UNION_DEBUG, // REGISTER_UNION_DEBUG:
    VAR_DEBUG,            // VAR_DEBUG:
    GET_TYPE_SIZE_DEBUG,  // [get_type_size]

    // v0.12.0: Async/Await 関連のデバッグメッセージ
    ASYNC_TASK_REGISTER,           // async タスク登録
    ASYNC_TASK_ID_SET,             // Future.task_id 設定
    ASYNC_TASK_RETURN_FUTURE,      // async から Future を返す
    ASYNC_INTERNAL_FUTURE_MEMBERS, // internal_future メンバー数
    AWAIT_TASK_WAITING,            // await で親タスク待機中
    AWAIT_VALUE_EXTRACT,           // await で値を抽出
    AWAIT_INTERNAL_FUTURE,         // internal_future から値取得
    AWAIT_TASK_COMPLETED,          // await で既に完了済みのタスク
    EVENT_LOOP_REGISTER_TASK,      // イベントループにタスク登録
    EVENT_LOOP_STORE_TASK,         // イベントループにタスク保存
    EVENT_LOOP_RUN_ONE_CYCLE,  // イベントループの1サイクル実行
    EVENT_LOOP_SKIP_EXECUTING, // 実行中タスクをスキップ
    EVENT_LOOP_TASK_RESUME,    // イベントループでタスク再開
    EVENT_LOOP_TASK_SKIP,      // イベントループでタスクスキップ
    EVENT_LOOP_TASK_COMPLETED, // タスクが完了してis_ready設定
    EVENT_LOOP_SET_VALUE,      // タスクの戻り値を設定
    EVENT_LOOP_GET_TASK,       // get_task でタスク取得
    EVENT_LOOP_RUN_UNTIL_COMPLETE, // run_until_complete 実行
    SLEEP_TASK_REGISTER,           // sleep タスク登録
    SLEEP_RETURN_FUTURE,           // sleep から Future を返す
    SLEEP_TASK_SLEEPING,           // タスクがまだsleep中
    SLEEP_TASK_WOKE_UP,            // タスクがsleepから起床

    // 汎用デバッグ（最後の手段として残す）
    GENERIC_DEBUG, // 汎用デバッグライン出力

    MAX_DEBUG_MSG_ID // 最大値マーカー
};

// デバッグモードフラグ（外部宣言）
extern bool debug_mode;
extern DebugLanguage debug_language;

// 多言語対応デバッグ出力関数
void debug_msg(DebugMsgId msg_id, ...);

// 多言語対応エラー出力関数
void error_msg(DebugMsgId msg_id, ...);

inline void debug_log_line(const std::string &message) {
    if (!debug_mode)
        return;
    debug_msg(DebugMsgId::GENERIC_DEBUG, message.c_str());
}

#endif // DEBUG_H
