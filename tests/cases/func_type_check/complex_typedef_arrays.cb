// 複雑なtypedef配列の関数テスト

typedef int Score;
typedef string Name;
typedef int[5] ScoreList;
typedef string[3] NameList;

// 多次元typedef配列
typedef int[2] Matrix;
typedef int[2][2] Matrix2D;

// typedef配列を返す関数
ScoreList get_default_scores() {
    ScoreList scores = [85, 90, 78, 92, 88];
    return scores;
}

NameList get_team_names() {
    NameList names = ["Alice", "Bob", "Charlie"];
    return names;
}

Matrix2D create_matrix() {
    // 現在のシステムでは2次元配列リテラル [[1,2],[3,4]] は未サポート
    // 代替として初期化された配列を返す
    Matrix2D matrix = [
        [1, 2],
        [3, 4]
    ];  // デフォルト値（0）で初期化される
    return matrix;
}

// typedef配列を引数に取る関数
Score calculate_average(ScoreList scores) {
    Score total = 0;
    for (int i = 0; i < 5; i = i + 1) {
        total = total + scores[i];
    }
    return total / 5;
}

void print_names(NameList names) {
    println("Team members:");
    for (int i = 0; i < 3; i = i + 1) {
        println("- ", names[i]);
    }
}

void print_matrix(Matrix2D matrix) {
    println("Matrix (2x2 with default values):");
    for (int i = 0; i < 2; i = i + 1) {
        println("Row ", i, ": [", matrix[i][0], ", ", matrix[i][1], "]");
    }
}

int main() {
    // typedef配列の基本テスト
    ScoreList scores = get_default_scores();
    println("Base score: ", scores[0]);
    
    // ボーナススコア計算
    ScoreList bonus_scores = [95, 87, 91, 83, 89];
    println("Bonus score: ", bonus_scores[0]);

    Matrix2D mat = create_matrix();
    print_matrix(mat);
    
    return 0;
}
