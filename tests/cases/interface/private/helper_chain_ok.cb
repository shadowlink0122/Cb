// プライベートメソッドとチェーン操作の複合テスト（成功ケース）

interface IHelper {
    int amplify(int value);
    int shift(int value);
};

impl IHelper for int {
    int amplify(int value) {
        return value * 2;
    }
    
    int shift(int value) {
        return value + 3;
    }
};

interface IProcessor {
    int process(int value);
    int doubleProcess(int first, int second);
};

impl IProcessor for int {
    int process(int value) {
        int clamped = self.clamp(value);
        int helper_seed = self.createHelperSeed();
        IHelper helper = helper_seed;
        int stage1 = helper.amplify(clamped);
        int stage2 = helper.shift(stage1);
        return stage2;
    }
    
    int doubleProcess(int first, int second) {
        int helper_seed = self.createHelperSeed();
        IHelper helper = helper_seed;
        int firstStage = helper.shift(helper.amplify(self.clamp(first)));
        int secondStage = helper.amplify(helper.shift(self.clamp(second)));
        return firstStage + secondStage;
    }
    
    private int createHelperSeed() {
        return self;
    }
    
    private int clamp(int value) {
        if (value < 0) {
            return 0;
        }
        if (value > 50) {
            return 50;
        }
        return value;
    }
};

int main() {
    println("Private helper chain success test:");
    
    int seed = 7;
    IProcessor processor = seed;
    
    int result1 = processor.process(12);
    println("process(12) = %d", result1); // clamp=12 -> amplify=24 -> shift=27
    
    int result2 = processor.process(-5);
    println("process(-5) = %d", result2); // clamp=0 -> amplify=0 -> shift=3
    
    int result3 = processor.doubleProcess(30, 100);
    println("doubleProcess(30, 100) = %d", result3); // first=63, second=106 -> 169
    
    println("Private helper chain success test passed");
    return 0;
}
