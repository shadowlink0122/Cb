// 最も基本的な構造体+配列+interfaceテスト

struct Container {
    int[4] data;
    int count;
};

interface Processor {
    int getElement(int index);
    Container setElement(int index, int value);
    int getSum();
};

impl Processor for Container {
    int getElement(int index) {
        if (index >= 0 && index < 4) {
            return self.data[index];
        }
        return 0;
    }
    
    Container setElement(int index, int value) {
        if (index >= 0 && index < 4) {
            self.data[index] = value;
        }
        return self;
    }
    
    int getSum() {
        return self.data[0] + self.data[1] + self.data[2] + self.data[3];
    }
};

int main() {
    Container container;
    container.data[0] = 1;
    container.data[1] = 2;
    container.data[2] = 3;
    container.data[3] = 4;
    container.count = 4;
    
    Processor proc = container;
    
    int elem0 = proc.getElement(0);
    println(elem0);
    int elem1 = proc.getElement(1);
    println(elem1);
    
    int sum = proc.getSum();
    println(sum);
    
    Container result = proc.setElement(0, 10);
    int newElem = proc.getElement(0);
    println(newElem);
    
    return 0;
}
