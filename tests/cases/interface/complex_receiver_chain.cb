// 複合レシーバチェーンのテスト

struct Stat {
    int value;
};

impl StatOps for Stat {
    int getValue() {
        return self.value;
    }
};

struct Member {
    Stat stat;
};

impl MemberOps for Member {
    Stat statRef() {
        return self.stat;
    }
};

struct Team {
    Member members[2];
};

impl TeamOps for Team {
    Member firstMember() {
        return self.members[0];
    }
    Member memberAt(int index) {
        return self.members[index];
    }
};

struct Player {
    Team team;
};

impl PlayerAccess for Player {
    Team teamRef() {
        return self.team;
    }
};

int main() {
    Player player;
    player.team.members[0].stat.value = 42;
    player.team.members[1].stat.value = 7;

    int primary = player.teamRef().firstMember().statRef().getValue();
    int secondary = player.teamRef().memberAt(1).statRef().getValue();

    if (primary != 42) {
        return 100 + primary;
    }
    if (secondary != 7) {
        return 200 + secondary;
    }

    return 0;
}
