// Test: ? operator with Option<T>
// v0.12.1: Error propagation for Option types

Option<int> safe_array_access(int[] arr, int index) {
    if (index < 0 || index >= 5) {
        return Option::None;
    }
    return Option::Some(arr[index]);
}

Option<int> chain_array_access(int[] arr, int idx1, int idx2) {
    int val1 = safe_array_access(arr, idx1)?;
    int val2 = safe_array_access(arr, idx2)?;
    return Option::Some(val1 + val2);
}

int main() {
    int[] arr = [10, 20, 30, 40, 50];
    
    // Success case: valid indices
    Option<int> r1 = chain_array_access(arr, 1, 3);
    println("Success case: got result");
    
    // Error case: invalid index
    Option<int> r2 = chain_array_access(arr, 1, 10);
    println("Error case: None propagated");
    
    return 0;
}
