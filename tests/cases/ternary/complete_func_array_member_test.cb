// 完全な func()[0].member テスト

typedef struct {
    string name;
    int age;
} Person;

Person[2] get_people() {
    Person[2] arr;
    arr[0].name = "Alice";
    arr[0].age = 25;
    arr[1].name = "Bob";
    arr[1].age = 30;
    return arr;
}

int[3] get_numbers() {
    int[3] arr = [10, 20, 30];
    return arr;
}

int main() {
    // 基本テスト: 数値配列（既存機能）
    println("Numbers test:");
    println(get_numbers()[0]);  // 10
    println(get_numbers()[1]);  // 20
    println(get_numbers()[2]);  // 30
    
    // 新機能テスト: 構造体配列メンバーアクセス
    println("Struct array member test:");
    println(get_people()[0].name);  // Alice
    println(get_people()[0].age);   // 25
    println(get_people()[1].name);  // Bob
    println(get_people()[1].age);   // 30
    
    // 三項演算子テスト
    println("Ternary operator test:");
    bool flag = true;
    println(flag ? get_people()[0].name : get_people()[1].name);  // Alice
    println(flag ? get_people()[0].age : get_people()[1].age);    // 25
    
    return 0;
}
