// 構造体配列戻り値のメンバーアクセステスト

typedef struct {
    string name;
    int age;
} Person;

// 注意: 現在の実装では構造体配列の戻り値は限定的サポート
// 代わりに個別の構造体を返す関数でテスト
Person get_person(int index) {
    if (index == 0) {
        Person p = {name: "Alice", age: 25};
        return p;
    } else {
        Person p = {name: "Bob", age: 30};
        return p;
    }
}

int main() {
    // 構造体戻り値の直接メンバーアクセス
    println(get_person(0).name);  // Alice
    println(get_person(0).age);   // 25
    println(get_person(1).name);  // Bob
    println(get_person(1).age);   // 30
    
    // 三項演算子内での構造体メンバーアクセス
    bool flag = true;
    println(flag ? get_person(0).name : get_person(1).name);  // Alice
    println(flag ? get_person(0).age : get_person(1).age);    // 25
    
    return 0;
}
