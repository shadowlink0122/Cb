// ネストメンバ直接代入の成功テスト

struct Level3 { int x; };
struct Level2 { Level3 l3; };
struct Level1 { Level2 l2; };

int main() {
    println("=== Nested Member Direct Assignment Test ===");
    
    // 2レベル
    Level1 obj1;
    obj1 = {l2: {l3: {x: 10}}};
    obj1.l2.l3.x = 999;
    println("2-level: obj1.l2.l3.x =", obj1.l2.l3.x);
    
    // 3レベル
    struct L4 { int val; };
    struct L3 { L4 l4; };
    struct L2 { L3 l3; };
    struct L1 { L2 l2; };
    L1 deep;
    deep = {l2: {l3: {l4: {val: 42}}}};
    deep.l2.l3.l4.val = 888;
    println("3-level: deep.l2.l3.l4.val =", deep.l2.l3.l4.val);
    
    if (obj1.l2.l3.x == 999 && deep.l2.l3.l4.val == 888) {
        println("\n✅ Nested member direct assignment works!");
        return 0;
    } else {
        println("\n❌ Test failed");
        return 1;
    }
}
