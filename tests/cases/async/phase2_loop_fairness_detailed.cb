// Phase 2.0 Test: Loop fairness with detailed output
// Verify that tasks actually switch between iterations

async Future<int> task_a() {
    println("[A] Start");
    for (int i = 0; i < 5; i++) {
        println("[A] Iteration {i}");
    }
    println("[A] Done");
    return 100;
}

async Future<int> task_b() {
    println("[B] Start");
    for (int i = 0; i < 5; i++) {
        println("[B] Iteration {i}");
    }
    println("[B] Done");
    return 200;
}

void main() {
    println("=== Fairness Test: Two Tasks with Loops ===");
    
    Future<int> fa = task_a();
    Future<int> fb = task_b();
    
    println("Both tasks registered, awaiting...");
    
    int ra = await fa;
    int rb = await fb;
    
    println("Results: A={ra}, B={rb}");
}
