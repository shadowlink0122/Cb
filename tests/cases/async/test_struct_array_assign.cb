// Test: Struct array assignment
// This should work but currently fails in Cb interpreter

struct Task {
    int task_id;
    int priority;
    int callback_type;
    void* data;
};

void main() {
    println("Testing struct array operations...\n");
    
    // Test 1: Direct array element assignment
    println("Test 1: Direct element assignment");
    Task[5] tasks;
    Task t1 = {42, 5, 1, nullptr};
    
    println("Created task: id=", t1.task_id, " priority=", t1.priority);
    
    // This should work but fails
    tasks[0] = t1;
    
    println("After tasks[0] = t1");
    println("tasks[0].task_id = ", tasks[0].task_id);
    println("tasks[0].priority = ", tasks[0].priority);
    
    if (tasks[0].task_id == 42) {
        println("✅ Struct array assignment works!");
    } else {
        println("❌ Struct array assignment failed!");
        println("Expected: 42, Got: ", tasks[0].task_id);
    }
}
