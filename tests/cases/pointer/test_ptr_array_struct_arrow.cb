// Test pointer array access with arrow operator: ptr[index]->member

struct Point {
    int x;
    int y;
};

void main() {
    println("=== Struct Pointer Array Arrow Test ===");
    
    // 構造体配列を作成
    Point[3] points;
    points[0].x = 10;
    points[0].y = 20;
    points[1].x = 30;
    points[1].y = 40;
    points[2].x = 50;
    points[2].y = 60;
    
    // 配列へのポインタを取得
    Point* ptr = &points[0];
    
    // ptr[index]->member で読み取り
    println("ptr[0]->x = %d", ptr[0]->x);
    println("ptr[0]->y = %d", ptr[0]->y);
    println("ptr[1]->x = %d", ptr[1]->x);
    println("ptr[1]->y = %d", ptr[1]->y);
    println("ptr[2]->x = %d", ptr[2]->x);
    println("ptr[2]->y = %d", ptr[2]->y);
    
    // ptr[index]->member で書き込み
    ptr[0]->x = 100;
    ptr[0]->y = 200;
    ptr[1]->x = 300;
    
    println("\nAfter write:");
    println("ptr[0]->x = %d", ptr[0]->x);
    println("ptr[0]->y = %d", ptr[0]->y);
    println("ptr[1]->x = %d", ptr[1]->x);
    
    println("\nOriginal array:");
    println("points[0].x = %d", points[0].x);
    println("points[0].y = %d", points[0].y);
    println("points[1].x = %d", points[1].x);
    
    println("\n✅ Struct pointer array arrow test passed!");
}
