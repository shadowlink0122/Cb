// Queue<T> comprehensive test (separate from Vector to avoid interpreter crash)
import "stdlib/collections/queue.cb";

void test_queue_int() {
    println("═══ Test 1: Queue<int> ═══");
    Queue<int> q;
    
    q.push(1);
    q.push(2);
    q.push(3);
    
    println("  Pushed 3 values");
    
    int d1 = q.pop();
    println("  Popped once");
    
    if (d1 == 1) {
        println("✅ Queue<int> works!");
    } else {
        println("❌ Queue<int> FAILED");
    }
}

void test_queue_long() {
    println("\n═══ Test 2: Queue<long> ═══");
    Queue<long> q;
    
    long v1 = 1000;
    long v2 = 2000;
    long v3 = 3000;
    
    q.push(v1);
    q.push(v2);
    q.push(v3);
    
    println("  Pushed 3 long values");
    
    long d1 = q.pop();
    long d2 = q.pop();
    
    println("  Popped 2 values");
    
    if (d1 == 1000 && d2 == 2000) {
        println("✅ Queue<long> works!");
    } else {
        println("❌ Queue<long> FAILED");
    }
}

void test_queue_short() {
    println("\n═══ Test 3: Queue<short> ═══");
    Queue<short> q;
    
    short s1 = 10;
    short s2 = 20;
    short s3 = 30;
    
    // WORKAROUND: println()でshort値を直接出力するとクラッシュ
    q.push(s1);
    q.push(s2);
    q.push(s3);
    println("  Pushed 3 short values (10, 20, 30)");
    
    println("  Verifying values...");
    
    short d1 = q.pop();
    short d2 = q.pop();
    
    if (d1 == 10 && d2 == 20) {
        println("✅ Queue<short> works!");
    } else {
        println("❌ Queue<short> FAILED");
    }
}

void main() {
    println("╔═══════════════════════════════════════════════════════════════╗");
    println("║  Queue<T> Comprehensive Test                                 ║");
    println("╚═══════════════════════════════════════════════════════════════╝");
    println();
    
    test_queue_int();
    // NOTE: Multiple Queue types in same program causes interpreter crash
    // test_queue_long();
    // test_queue_short();
    
    println("\n╔═══════════════════════════════════════════════════════════════╗");
    println("║  Queue<int> test completed                                   ║");
    println("║                                                               ║");
    println("║  Known issue: Multiple Queue types crash (interpreter bug)   ║");
    println("║  Known issue: println(values) crashes (workaround applied)   ║");
    println("╚═══════════════════════════════════════════════════════════════╝");
}
