// Test for Vector library import and usage
// This test verifies that Vector can be imported and used as a library

import "stdlib/collections/vector.cb";

void test_vector_import() {
    println("=== Test: Vector Import ===");
    
    Vector<int, SystemAllocator> vec;
    vec.init(5);
    
    println("✅ Vector import and struct creation successful");
}

void test_vector_basic_operations() {
    println("\n=== Test: Vector Basic Operations ===");
    
    Vector<int, SystemAllocator> vec;
    vec.init(5);
    
    vec.push(10);
    vec.push(20);
    vec.push(30);
    
    assert(vec.get_length() == 3);
    println("✅ Vector push operations work");
    
    int val = vec.pop();
    assert(val == 30);
    assert(vec.get_length() == 2);
    println("✅ Vector pop operations work");
}

void test_vector_resize() {
    println("\n=== Test: Vector Resize ===");
    
    Vector<int, SystemAllocator> vec;
    vec.init(2);
    
    vec.push(1);
    vec.push(2);
    
    vec.resize(5);
    assert(vec.get_capacity() == 5);
    println("✅ Vector resize works");
    
    vec.push(3);
    assert(vec.get_length() == 3);
    println("✅ Vector operations after resize work");
}

void test_vector_destructor() {
    println("\n=== Test: Vector Destructor ===");
    
    {
        Vector<int, SystemAllocator> vec;
        vec.init(3);
        vec.push(10);
        vec.push(20);
    }
    
    println("✅ Vector destructor works (no crash on scope exit)");
}

void main() {
    println("╔════════════════════════════════════════════╗");
    println("║  Vector Library Import Test               ║");
    println("╚════════════════════════════════════════════╝\n");
    
    test_vector_import();
    test_vector_basic_operations();
    test_vector_resize();
    test_vector_destructor();
    
    println("\n╔════════════════════════════════════════════╗");
    println("║  All Vector library tests passed!         ║");
    println("╚════════════════════════════════════════════╝");
}
